## 场景案例

考虑这样一个功能，为系统加入权限控制。

普通用户具有查看所属部门的人员列表权限，但不能查看每个用户的薪资；

部门经理具有查看所属部门的人员列表权限，同时也可以查看每一个用户的薪资。

### 分析

对于 人员列表 的查看权限，每授权给一个用户，在数据库就会有一条记录，如果有一万个用户对 人员列表 有查看权限，就会有一万条记录；按照以往的实现方式，就会有一万个对象实例，而这些实例中有大部分的数据时重复的。最终导致系统当中，存在大量细粒度对象，而且存在大量的重复数据，严重耗费内存。

如果能有效地减少对象的数量，减少重复数据，就可以节省不少的内存。一个基本思路是：缓存这些包含重复数据的对象，让这些对象只出现一次。

因此需要分离对象实例中，哪些数据时不变且重复出现的，将这部分的数据缓存，通常把它们称为对象的内部状态。而变化的部分称为外部状态

把内部状态分离出来共享，称之为享元，通过共享享元对象来减少对内存的占用。把外部状态分离出来，让应用在使用的时候进行维护，并在需要的时候传递给享元对象使用。

为了控制对内部状态的共享，并且让外部能方便使用共享数据，可以提供一个工厂来管理享元。

## 定义

运用共享技术有效地支持大量细粒度的对象。

## UML

![uml](uml.png)



## 代码实现



## 好处 


## 适用场景

以下情况可以考虑使用享元模式
